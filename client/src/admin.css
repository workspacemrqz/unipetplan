/* ADMIN CSS SIMPLIFICADO - USA SISTEMA UNIFICADO DE cores.css */

/* Import animações customizadas */
@import './styles/animations.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   APLICAÇÃO DO MODO ADMIN
   Aplica as cores específicas do admin definidas em cores.css
======================================== */

/* Aplicar modo admin automaticamente em todas as páginas admin */
body:has([data-admin-area="true"]),
body.admin-area,
.admin-area,
[data-admin-area="true"] {
  --background: var(--admin-background);
  --foreground: var(--admin-foreground);
  --muted: var(--admin-muted);
  --muted-foreground: var(--admin-muted-foreground);
  --placeholder: var(--admin-placeholder);
  --card: var(--admin-card);
  --card-foreground: var(--admin-card-foreground);
  --popover: var(--admin-popover);
  --popover-foreground: var(--admin-popover-foreground);
  --input: var(--admin-input);
  --border: var(--admin-border);
  --sidebar: var(--admin-sidebar);
  --sidebar-foreground: var(--admin-sidebar-foreground);
  --sidebar-primary: var(--admin-sidebar-primary);
  --sidebar-primary-foreground: var(--admin-sidebar-primary-foreground);
  --sidebar-accent: var(--admin-sidebar-accent);
  --sidebar-accent-foreground: var(--admin-sidebar-accent-foreground);
  --sidebar-border: var(--admin-sidebar-border);
  --sidebar-ring: var(--admin-sidebar-ring);
  --chart-1: var(--admin-chart-1);
  --chart-2: var(--admin-chart-2);
  --chart-3: var(--admin-chart-3);
  --chart-4: var(--admin-chart-4);
  --chart-5: var(--admin-chart-5);
}

/* ========================================
   FONTES E TIPOGRAFIA
======================================== */

:root {
  --font-sans: 'DM Sans', sans-serif;
  --font-serif: 'Georgia', serif;
  --font-mono: 'Fira Code', monospace;
}

/* ========================================
   ESTILOS BASE
======================================== */

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

/* ========================================
   COMPONENTES ESPECÍFICOS ADMIN
======================================== */

@layer components {
  /* Ícones customizados herdam cor branca quando em botões ativos */
  [data-state="active"] .custom-icon-auto {
    filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(100%) contrast(100%) !important;
  }
  
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50;
    @apply [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0;
    background-color: rgb(var(--primary));
    color: rgb(var(--primary-foreground));
    border: none;
  }
  
  .btn-primary:disabled {
    opacity: 0.5;
    pointer-events: none;
  }
}

/* ========================================
   FIXES PARA INPUTS - PREVENIR MUDANÇA DE COR
======================================== */

/* PREVENIR MUDANÇA DE COR DO BACKGROUND AO COLAR TEXTO */
input, select {
  background-color: rgb(var(--input)) !important;
  color: rgb(var(--input-foreground, var(--foreground))) !important;
}

/* Controlar cor do placeholder */
input::placeholder, select::placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

input::-webkit-input-placeholder, select::-webkit-input-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

input::-moz-placeholder, select::-moz-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

input:-ms-input-placeholder, select:-ms-input-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

input:-moz-placeholder, select:-moz-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

/* Removido para não alterar cor de fundo quando clicar no input */
/* As regras de focus e active foram removidas conforme solicitado */

/* Prevenir autofill do navegador de mudar cores */
input:-webkit-autofill,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px rgb(var(--input)) inset !important;
  -webkit-text-fill-color: rgb(var(--input-foreground, var(--foreground))) !important;
  background-color: rgb(var(--input)) !important;
  color: rgb(var(--input-foreground, var(--foreground))) !important;
}

/* ========================================
   REMOÇÃO DE OUTLINE E FOCUS
======================================== */

/* REMOÇÃO TOTAL DE OUTLINE E FOCUS - PRIORIDADE MÁXIMA */
/* EXCEÇÃO CRÍTICA: Popups e dialogs PRECISAM de box-shadow para funcionar */
*, *::before, *::after {
  outline: none !important;
}

/* Remover box-shadow de todos EXCETO popups */
*:not([role="dialog"]):not([data-radix-dialog-content]):not([data-radix-alert-dialog-content]):not([data-radix-sheet-content]),
*:not([role="dialog"]):not([data-radix-dialog-content]):not([data-radix-alert-dialog-content]):not([data-radix-sheet-content])::before,
*:not([role="dialog"]):not([data-radix-dialog-content]):not([data-radix-alert-dialog-content]):not([data-radix-sheet-content])::after {
  box-shadow: none !important;
}

*:active:not([role="dialog"]):not([data-radix-dialog-content]):not([data-radix-alert-dialog-content]):not([data-radix-sheet-content]) {
  outline: none !important;
  box-shadow: none !important;
}

/* Remover outline de elementos específicos MAS preservar box-shadow dos popups */
button:not([role="dialog"]):not([data-radix-dialog-content]):not([data-radix-alert-dialog-content]):not([data-radix-sheet-content]),
input, textarea, select, a, [role="button"], [tabindex],
div:not([role="dialog"]):not([data-radix-dialog-content]):not([data-radix-alert-dialog-content]):not([data-radix-sheet-content]),
span, p, h1, h2, h3, h4, h5, h6, img, svg {
  outline: none !important;
  box-shadow: none !important;
}

/* GARANTIR que popups e dialogs SEMPRE tenham box-shadow */
[role="dialog"], [data-radix-dialog-content], [data-radix-alert-dialog-content], [data-radix-sheet-content] {
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
}

/* ========================================
   DROPDOWN MENU FIXES
======================================== */

/* REMOVER BACKGROUND DOS BOTÕES DO DROPDOWN DE COLUNAS - FORÇA TOTAL */
[data-radix-dropdown-menu-content] * {
  background-color: transparent !important;
  background: transparent !important;
  background-image: none !important;
}

/* Especificamente para itens de menu */
[data-radix-dropdown-menu-content] [role="menuitemcheckbox"],
[data-radix-dropdown-menu-content] > [role="menuitemcheckbox"],
[data-radix-dropdown-menu-content] [data-radix-collection-item],
[data-radix-dropdown-menu-content] .relative.flex.cursor-default,
[data-radix-dropdown-menu-content] div {
  background-color: transparent !important;
  background: transparent !important;
  background-image: none !important;
}

/* Sobrescrever TODOS os estados possíveis */
[data-radix-dropdown-menu-content] *:hover,
[data-radix-dropdown-menu-content] *:focus,
[data-radix-dropdown-menu-content] *:focus-visible,
[data-radix-dropdown-menu-content] .bg-accent,
[data-radix-dropdown-menu-content] .focus\:bg-accent,
[data-radix-dropdown-menu-content] .hover\:bg-accent,
[data-radix-dropdown-menu-content] .data-\[state\=open\]\:bg-accent {
  background-color: transparent !important;
  background: transparent !important;
}

/* ========================================
   RESPONSIVIDADE MOBILE
======================================== */

/* CORREÇÃO DEFINITIVA POPUPS MOBILE - Mobile-First com breakpoint expandido */
@media (max-width: 1023px) {
  /* POPUPS E DIALOGS - Centralização forçada com margens iguais */
  [role="dialog"], [data-radix-dialog-content] {
    width: calc(100vw - 2rem) !important;
    max-width: none !important;
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) translateY(-50%) !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  /* ALERT DIALOGS */
  [data-radix-alert-dialog-content] {
    width: calc(100vw - 2rem) !important;
    max-width: none !important;
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) translateY(-50%) !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  /* SHEETS quando lado direito/esquerdo */
  [data-radix-sheet-content][data-side="right"] {
    width: calc(100vw - 2rem) !important;
    right: 1rem !important;
    left: auto !important;
  }
  
  [data-radix-sheet-content][data-side="left"] {
    width: calc(100vw - 2rem) !important;
    left: 1rem !important;
    right: auto !important;
  }
}

/* ========================================
   CHECKOUT MOBILE EXTRA-PEQUENO
======================================== */

/* Classes específicas para checkout mobile extra-pequeno */
@media (max-width: 474px) {
  .checkout-mobile-compact {
    padding: 0.5rem !important;
    gap: 0.75rem !important;
  }
  
  .checkout-progress-mobile {
    transform: scale(0.85);
  }
  
  .checkout-card-mobile {
    padding: 0.75rem !important;
    margin: 0.5rem 0 !important;
  }

  .checkout-input-mobile {
    padding: 0.625rem !important;
    font-size: 0.9rem !important;
  }

  .checkout-button-mobile {
    padding: 0.75rem 1rem !important;
    font-size: 0.875rem !important;
  }

  .checkout-grid-mobile {
    gap: 0.75rem !important;
  }

  .checkout-header-mobile {
    font-size: 1.25rem !important;
    margin-bottom: 1rem !important;
  }
}

/* ========================================
   UTILITÁRIOS MOBILE RESPONSIVOS
======================================== */

@media (max-width: 1023px) {
  .container-mobile {
    width: 100% !important;
    max-width: 100% !important;
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
  }

  .stack-mobile {
    flex-direction: column !important;
    align-items: stretch !important;
  }

  .space-mobile {
    gap: 0.5rem !important;
  }

  .p-mobile {
    padding: 0.75rem !important;
  }

  .w-mobile-full {
    width: 100% !important;
  }

  .text-mobile-sm {
    font-size: 0.875rem !important;
    line-height: 1.25rem !important;
  }

  .btn-mobile-center {
    margin-left: auto !important;
    margin-right: auto !important;
    width: 100% !important;
  }

  .grid-mobile-single {
    grid-template-columns: 1fr !important;
  }

  .overflow-mobile-hidden {
    overflow-x: hidden !important;
  }

  .card-mobile {
    margin-bottom: 1rem !important;
    padding: 0.75rem !important;
  }

  .flex-mobile-col {
    flex-direction: column !important;
  }

  .flex-mobile-wrap {
    flex-wrap: wrap !important;
  }

  .header-mobile {
    padding: 0.5rem !important;
    gap: 0.5rem !important;
  }

  .form-mobile {
    gap: 1rem !important;
  }

  .form-mobile .form-item {
    margin-bottom: 1rem !important;
  }
}

/* ========================================
   ESTADO DE FOCO UNIVERSAL
======================================== */

button:focus, input:focus, select:focus, a:focus, [role="button"]:focus, [tabindex]:focus,
div:focus, span:focus, p:focus, h1:focus, h2:focus, h3:focus, h4:focus, h5:focus, h6:focus,
img:focus, svg:focus {
  outline: none !important;
  box-shadow: none !important;
}

*:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* ========================================
   FORÇA FUNDO BRANCO PARA TEXTAREAS
======================================== */

/* Garantir que textareas sempre tenham fundo branco em todos os estados */
textarea, 
textarea:focus, 
textarea:active, 
textarea:hover {
  background-color: #FFFFFF !important;
  background: #FFFFFF !important;
  color: rgb(var(--input-foreground, var(--foreground))) !important;
  resize: none !important;
}

/* Garantir cor consistente para placeholders em textareas */
textarea::placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

textarea::-webkit-input-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

textarea::-moz-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

textarea:-ms-input-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

textarea:-moz-placeholder {
  color: rgb(var(--placeholder, var(--muted-foreground))) !important;
}

/* ========================================
   CHECKBOX CUSTOMIZADO
======================================== */

.custom-checkbox-input {
  box-shadow: none !important;
}

.custom-checkbox-input[data-checked="true"] {
  background-color: rgb(var(--success)) !important;
}

/* ========================================
   ANIMAÇÕES 3D E UTILITÁRIOS
======================================== */

.perspective-1000 {
  perspective: 1000px;
}

.transform-style-preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

.rotate-y-180 {
  transform: rotateY(180deg);
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ========================================
   SCROLLBAR MODERNA E OTIMIZADA - REFATORADA
======================================== */

/* Aplicar scrollbar moderna em TODOS os elementos de scroll incluindo Radix Dialog */
.custom-scrollbar,
[data-radix-dialog-content],
[data-radix-dialog-content] > *,
.overflow-y-auto,
.overflow-x-auto,
.overflow-auto {
  /* Firefox - scrollbar fino e moderno */
  scrollbar-width: thin !important;
  scrollbar-color: rgba(0, 0, 0, 0.3) transparent !important;
}

/* Webkit browsers (Chrome, Safari, Edge) - Design moderno e MINIMALISTA */
.custom-scrollbar::-webkit-scrollbar,
[data-radix-dialog-content]::-webkit-scrollbar,
[data-radix-dialog-content] *::-webkit-scrollbar,
.overflow-y-auto::-webkit-scrollbar,
.overflow-x-auto::-webkit-scrollbar,
.overflow-auto::-webkit-scrollbar {
  width: 6px !important;
  height: 6px !important;
}

.custom-scrollbar::-webkit-scrollbar-track,
[data-radix-dialog-content]::-webkit-scrollbar-track,
[data-radix-dialog-content] *::-webkit-scrollbar-track,
.overflow-y-auto::-webkit-scrollbar-track,
.overflow-x-auto::-webkit-scrollbar-track,
.overflow-auto::-webkit-scrollbar-track {
  background: transparent !important;
  border-radius: 9999px !important;
}

.custom-scrollbar::-webkit-scrollbar-thumb,
[data-radix-dialog-content]::-webkit-scrollbar-thumb,
[data-radix-dialog-content] *::-webkit-scrollbar-thumb,
.overflow-y-auto::-webkit-scrollbar-thumb,
.overflow-x-auto::-webkit-scrollbar-thumb,
.overflow-auto::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3) !important;
  border-radius: 9999px !important;
  border: none !important;
  transition: background 0.15s ease !important;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover,
[data-radix-dialog-content]::-webkit-scrollbar-thumb:hover,
[data-radix-dialog-content] *::-webkit-scrollbar-thumb:hover,
.overflow-y-auto::-webkit-scrollbar-thumb:hover,
.overflow-x-auto::-webkit-scrollbar-thumb:hover,
.overflow-auto::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.45) !important;
}

.custom-scrollbar::-webkit-scrollbar-thumb:active,
[data-radix-dialog-content]::-webkit-scrollbar-thumb:active,
[data-radix-dialog-content] *::-webkit-scrollbar-thumb:active,
.overflow-y-auto::-webkit-scrollbar-thumb:active,
.overflow-x-auto::-webkit-scrollbar-thumb:active,
.overflow-auto::-webkit-scrollbar-thumb:active {
  background: rgba(0, 0, 0, 0.6) !important;
}

/* REMOVER COMPLETAMENTE as setas/botões - TODAS as variações */
.custom-scrollbar::-webkit-scrollbar-button,
[data-radix-dialog-content]::-webkit-scrollbar-button,
[data-radix-dialog-content] *::-webkit-scrollbar-button,
.overflow-y-auto::-webkit-scrollbar-button,
.overflow-x-auto::-webkit-scrollbar-button,
.overflow-auto::-webkit-scrollbar-button {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: none !important;
}

.custom-scrollbar::-webkit-scrollbar-button:start:decrement,
.custom-scrollbar::-webkit-scrollbar-button:end:increment,
[data-radix-dialog-content]::-webkit-scrollbar-button:start:decrement,
[data-radix-dialog-content]::-webkit-scrollbar-button:end:increment,
[data-radix-dialog-content] *::-webkit-scrollbar-button:start:decrement,
[data-radix-dialog-content] *::-webkit-scrollbar-button:end:increment,
.overflow-y-auto::-webkit-scrollbar-button:start:decrement,
.overflow-y-auto::-webkit-scrollbar-button:end:increment,
.overflow-x-auto::-webkit-scrollbar-button:start:decrement,
.overflow-x-auto::-webkit-scrollbar-button:end:increment,
.overflow-auto::-webkit-scrollbar-button:start:decrement,
.overflow-auto::-webkit-scrollbar-button:end:increment {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

/* Remove cantos */
.custom-scrollbar::-webkit-scrollbar-corner,
[data-radix-dialog-content]::-webkit-scrollbar-corner,
[data-radix-dialog-content] *::-webkit-scrollbar-corner,
.overflow-y-auto::-webkit-scrollbar-corner,
.overflow-x-auto::-webkit-scrollbar-corner,
.overflow-auto::-webkit-scrollbar-corner {
  display: none !important;
  background: transparent !important;
}